<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Inner product similarity · LSH.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">LSH.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Similarity functions</span><ul><li><a class="tocitem" href="../cosine/">Cosine similarity</a></li><li><a class="tocitem" href="../lp_distance/"><span>$\ell^p$</span> distance</a></li><li><a class="tocitem" href="../jaccard/">Jaccard similarity</a></li><li class="is-active"><a class="tocitem" href>Inner product similarity</a><ul class="internal"><li><a class="tocitem" href="#SignALSH-1"><span>SignALSH</span></a></li><li><a class="tocitem" href="#MIPSHash-1"><span>MIPSHash</span></a></li><li><a class="tocitem" href="#Utilities-1"><span>Utilities</span></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Similarity functions</a></li><li class="is-active"><a href>Inner product similarity</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Inner product similarity</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/kernelmethod/LSH.jl/blob/master/docs/src/similarities/inner_prod.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Inner-product-similarity-1"><a class="docs-heading-anchor" href="#Inner-product-similarity-1">Inner product similarity</a><a class="docs-heading-anchor-permalink" href="#Inner-product-similarity-1" title="Permalink"></a></h1><h2 id="SignALSH-1"><a class="docs-heading-anchor" href="#SignALSH-1">SignALSH</a><a class="docs-heading-anchor-permalink" href="#SignALSH-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="LSH.SignALSH" href="#LSH.SignALSH"><code>LSH.SignALSH</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">SignALSH(n_hashes::Integer = 1,
         dtype::DataType = Float32,
         maxnorm::Union{Nothing,Real} = nothing,
         m::Integer = 3,
         resize_pow2::Bool = false)</code></pre><p>Create a <code>SignALSH</code> hash function for hashing on inner product similarity.</p><p><strong>Arguments</strong></p><ul><li><code>n_hashes::Integer</code> (default: <code>1</code>): the number of hash functions to generate.</li></ul><p><strong>Keyword parameters</strong></p><ul><li><code>dtype::DataType</code> (default: <code>Float32</code>): the data type to use in the LSH.SignALSH internals. For performance reasons you should pick <code>dtype</code> to match the type of the data you&#39;re hashing.</li><li><code>maxnorm::Union{Nothing,Real}</code> (default: <code>nothing</code>): an upper bound on the <span>$\ell^2$</span>-norm of the data points. <strong>Note: this keyword argument must be explicitly specified.</strong> If it left unspecified (or set to <code>nothing</code>), <code>SignALSH()</code> will raise an error.</li><li><code>m::Integer</code> (default: <code>3</code>): parameter <code>m</code> that affects the probability of a hash collision.</li><li><code>resize_pow2::Bool</code> (default: <code>false</code>): affects the way in which the returned <code>LSH.SignALSH</code> resizes to hash inputs of different sizes. If you think you&#39;ll be hashing inputs of many different sizes, it&#39;s more efficient to set <code>resize_pow2 = true</code>.</li></ul><p><strong>Examples</strong></p><p><code>SignALSH</code> is an <a href="similarities/@ref"><code>AsymmetricLSHFunction</code></a>, and hence hashes must be computed using <code>index_hash</code> and <code>query_hash</code>.</p><pre><code class="language-julia-repl">julia&gt; hashfn = SignALSH(12; maxnorm=10);

julia&gt; x = rand(4);

julia&gt; ih = index_hash(hashfn, x); qh = query_hash(hashfn, x);

julia&gt; length(ih) == length(qh) == 12
true

julia&gt; typeof(ih) == typeof(qh) == BitArray{1}
true</code></pre><p>You need to explicitly specify the <code>maxnorm</code> keyword parameter when constructing <code>SignALSH</code>, otherwise you will get an error.</p><pre><code class="language-julia-repl">julia&gt; hashfn = SignALSH(12)
ERROR: maxnorm must be specified for SignALSH</code></pre><p>You&#39;ll also get an error if you try to hash a vector that has norm greater than the <code>maxnorm</code> that you specified.</p><pre><code class="language-julia-repl">julia&gt; hashfn = SignALSH(; maxnorm=1);

julia&gt; index_hash(hashfn, ones(4))
ERROR: norm 2.0 exceeds maxnorm (1.0)</code></pre><p><strong>References</strong></p><ul><li>Anshumali Shrivastava and Ping Li. <em>Improved Asymmetric Locality Sensitive Hashing (ALSH) for Maximum Inner Product Search (MIPS)</em>. In Proceedings of the Thirty-First Conference on Uncertainty in Artificial Intelligence, UAI&#39;15, page 812–821, Arlington, Virginia, USA, 2015. AUAI Press. 10.5555/3020847.3020931. [https://arxiv.org/abs/1410.5410v2]</li></ul><p>See also: <a href="#LSH.inner_prod-Tuple{AbstractArray{T,1} where T,AbstractArray{T,1} where T}"><code>inner_prod</code></a>, <a href="../lp_distance/#LSH.ℓp_norm"><code>ℓ2_norm</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kernelmethod/LSH.jl/blob/fa0994c9b48ccec488e056c403f5883f649b4ea4/src/hashes/sign_alsh.jl#L30-L85">source</a></section></article><h2 id="MIPSHash-1"><a class="docs-heading-anchor" href="#MIPSHash-1">MIPSHash</a><a class="docs-heading-anchor-permalink" href="#MIPSHash-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="LSH.MIPSHash" href="#LSH.MIPSHash"><code>LSH.MIPSHash</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">MIPSHash(n_hashes::Integer = 1;
         dtype::Datatype = Float32,
         maxnorm::Union{Nothing,Real} = nothing,
         scale::Real = 1,
         m::Integer = 3,
         resize_pow2::Bool = false)</code></pre><p>Create a <code>MIPSHash</code> hash function for hashing on inner product similarity.</p><p><strong>Arguments</strong></p><ul><li><code>n_hashes::Integer</code> (default: <code>1</code>): the number of hash functions to generate.</li></ul><p><strong>Keyword parameters</strong></p><ul><li><code>dtype::DataType</code> (default: <code>Float32</code>): the data type to use in the LSH.MIPSHash internals. For performance reasons you should pick <code>dtype</code> to match the type of the data you&#39;re hashing.</li><li><code>maxnorm::Union{Nothing,Real}</code> (default: <code>nothing</code>): an upper bound on the <span>$\ell^2$</span>-norm of the data points. <strong>Note: this keyword argument must be explicitly specified.</strong> If it left unspecified (or set to <code>nothing</code>), <code>MIPSHash()</code> will raise an error.</li><li><code>scale::Real</code> (default: <code>1</code>): parameter that affects the probability of a hash collision. Large values of <code>scale</code> increases hash collision probability (even for inputs with low inner product similarity); small values of <code>scale</code> will decrease hash collision probability.</li></ul><p><strong>Examples</strong></p><p><code>MIPSHash</code> is an <a href="similarities/@ref"><code>AsymmetricLSHFunction</code></a>, and hence hashes must be computed using <code>index_hash</code> and <code>query_hash</code>.</p><pre><code class="language-julia-repl">julia&gt; hashfn = MIPSHash(5; maxnorm=10);

julia&gt; x = rand(4);

julia&gt; ih = index_hash(hashfn, x); qh = query_hash(hashfn, x);

julia&gt; length(ih) == length(qh) == 5
true

julia&gt; typeof(ih) == typeof(qh) == Vector{Int32}
true</code></pre><p>You need to explicitly specify the <code>maxnorm</code> keyword parameter when constructing <code>MIPSHash</code>, otherwise you will get an error.</p><pre><code class="language-julia-repl">julia&gt; hashfn = MIPSHash(5)
ERROR: maxnorm must be specified for MIPSHash</code></pre><p>You&#39;ll also get an error if you try to hash a vector that has norm greater than the <code>maxnorm</code> that you specified.</p><pre><code class="language-julia-repl">julia&gt; hashfn = MIPSHash(; maxnorm=1);

julia&gt; index_hash(hashfn, ones(4))
ERROR: norm 2.0 exceeds maxnorm (1.0)</code></pre><p><strong>References</strong></p><ul><li>Anshumali Shrivastava and Ping Li. <em>Asymmetric LSH (ALSH) for Sublinear Time Maximum Inner Product Search (MIPS)</em>. Proceedings of the 27th International Conference on Neural Information Processing Systems - Volume 2, NIPS&#39;14, page 2321–2329, Cambridge, MA, USA, 2014. MIT Press. 10.5555/2969033.2969086. [https://arxiv.org/abs/1405.5869]</li></ul><p>See also: <a href="#LSH.inner_prod-Tuple{AbstractArray{T,1} where T,AbstractArray{T,1} where T}"><code>inner_prod</code></a>, <a href="../lp_distance/#LSH.ℓp_norm"><code>ℓ2_norm</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kernelmethod/LSH.jl/blob/fa0994c9b48ccec488e056c403f5883f649b4ea4/src/hashes/mips_hash.jl#L30-L85">source</a></section></article><h2 id="Utilities-1"><a class="docs-heading-anchor" href="#Utilities-1">Utilities</a><a class="docs-heading-anchor-permalink" href="#Utilities-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="LSH.inner_prod-Tuple{AbstractArray{T,1} where T,AbstractArray{T,1} where T}" href="#LSH.inner_prod-Tuple{AbstractArray{T,1} where T,AbstractArray{T,1} where T}"><code>LSH.inner_prod</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">inner_prod(x::AbstractVector, y::AbstractVector)</code></pre><p>Computes the <span>$\ell^2$</span> inner product (dot product)</p><p><span>$\left\langle x, y\right\rangle = \sum_i x_iy_i$</span></p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using LinearAlgebra: dot;

julia&gt; x, y = randn(4), randn(4);

julia&gt; inner_prod(x,y) ≈ dot(x,y)
true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kernelmethod/LSH.jl/blob/fa0994c9b48ccec488e056c403f5883f649b4ea4/src/similarities.jl#L249-L265">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../jaccard/">« Jaccard similarity</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 17 January 2020 23:15">Friday 17 January 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
